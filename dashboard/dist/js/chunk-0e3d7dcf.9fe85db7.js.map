{"version":3,"sources":["webpack:///./src/views/Messages.vue?b379","webpack:///./src/views/Messages.vue","webpack:///./src/views/Messages.vue?46ef"],"names":["class","value","selected","messages","length","name","id","filters","message","key","singleMessage","_id","done","contact","mail","object","substr","sinceDate","createdAt","showFilter","data","created","config","method","url","headers","this","$store","state","auth","jwt","then","response","reverse","methods","$router","push","params","dateStr","diffMs","Date","diffMin","Math","ceil","diffH","round","diffD","floor","render"],"mappings":"yIAAA,W,4DCCUA,MAAM,a,iBACJ,Y,sBAGI,eAAoB,YAAd,WAAO,G,EAET,eAAyD,UAAjDC,MAAM,WAAWC,SAAA,IAAS,kBAAc,G,EAChD,eAA6D,UAArDD,MAAM,UAAUC,SAAA,IAAS,uBAAmB,G,GAEnDF,MAAM,Y,GAEAA,MAAM,S,GACNA,MAAM,U,GACNA,MAAM,W,GACNA,MAAM,Q,gDAd7B,eAmBO,OAnBP,EAmBO,CAlBH,eAAoE,W,EAA5C,EAAAG,U,iBAAZ,eAAmD,SAA7B,MAAG,eAAE,EAAAA,SAASC,QAAM,I,wBACvC,EAAAD,U,iBAAf,eAgBU,aAfN,eAcQ,cAbJ,E,eACA,eAGS,UAHDE,KAAK,SAASC,GAAG,S,qDAAkB,EAAAC,QAAO,K,CAC9C,EACA,G,cAFuC,EAAAA,WAI3C,eAOM,MAPN,EAOM,E,mBANF,eAKM,2BALuB,EAAAJ,UAAQ,SAAxBK,EAASF,G,wCAAtB,eAKM,OALkCG,IAAKH,EAAK,QAAK,mBAAE,EAAAI,cAAcF,EAAQG,MAAOX,MAAK,WAAgBQ,EAAQI,KAAI,Y,CACnH,eAA6C,IAA7C,EAA6C,eAA1BJ,EAAQK,QAAQC,MAAI,GACvC,eAAgD,IAAhD,EAAgD,eAA5BN,EAAQK,QAAQE,QAAM,GAC1C,eAAuE,IAAvE,EAAuE,eAAlDP,EAAQK,QAAQL,QAAQQ,OAAM,gBACnD,eAA6D,IAA7D,EAAgB,UAAO,eAAG,EAAAC,UAAUT,EAAQU,YAAS,I,0BAJuF,EAAAC,WAAWX,S,oFAehK,GACXY,KADW,WAEP,MAAO,CACHjB,SAAU,KACVI,QAAS,aAGjBc,QAAS,WAAF,8CAAE,kHACDC,EAAS,CACTC,OAAQ,MACRC,IAAK,qCACLC,QAAS,CACL,cAAkB,UAAYC,KAAKC,OAAOC,MAAMC,KAAKC,MALxD,SAQC,IAAMR,GAAQS,MAAK,SAAAC,GACrB,EAAK7B,SAAW6B,EAASZ,KAAKa,aAT7B,gDAAF,qDAAE,GAYTC,QAAS,CACLxB,cAAe,SAAUJ,GACrB,OAAOoB,KAAKS,QAAQC,KAAK,CACrB/B,KAAM,gBACNgC,OAAQ,CACJ/B,GAAIA,MAIhBa,WAAY,SAAUX,GAClB,OAAIA,EAAQI,MAAwB,WAAhBc,KAAKnB,SAK7BU,UAAW,SAAUqB,GACjB,IAAIC,EAAS,IAAIC,KAAS,IAAIA,KAAKF,GAC/BG,EAAUC,KAAKC,KAAKJ,EAAS,KAEjC,GAAIE,EAAU,GACV,OAAOA,EAAU,MAEjB,IAAIG,EAAQF,KAAKG,MAAMJ,EAAQ,IAC/B,GAAIG,EAAQ,GACR,OAAOA,EAAQ,IAEf,IAAIE,EAAQJ,KAAKK,MAAMH,EAAM,IAC7B,OAAOE,EAAQ,O,UCnEnC,EAAOE,OAASA,EAED","file":"js/chunk-0e3d7dcf.9fe85db7.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Messages.vue?vue&type=style&index=0&lang=scss\"","<template>\n    <main class=\"container\">\n        <h1>Messages<span v-if=\"messages\"> - {{messages.length}}</span></h1>\n        <section v-if=\"messages\">\n            <label>\n                <span>Filtrer</span>\n                <select name=\"filter\" id=\"filter\" v-model=\"filters\">\n                    <option value=\"nofilter\" selected>Pas de filtres</option>\n                    <option value=\"notDone\" selected>Nons lus uniquement</option>\n                </select>\n                <div class=\"messages\">\n                    <div v-for=\"(message, id) in messages\" :key=\"id\" @click=\"singleMessage(message._id)\" :class=\"'message' + (!message.done ? ' new' : '')\" v-show=\"showFilter(message)\">\n                        <p class=\"email\">{{message.contact.mail}}</p>\n                        <p class=\"object\">{{message.contact.object}}</p>\n                        <p class=\"content\">{{message.contact.message.substr(0,70) + '...'}}</p>\n                        <p class=\"date\">il y a {{ sinceDate(message.createdAt) }}</p>\n                    </div>\n                </div>\n            </label>\n        </section>\n    </main>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n    data () {\n        return {\n            messages: null,\n            filters: 'nofilter'\n        }\n    },\n    created: async function () {\n        let config = {\n            method: 'get',\n            url: process.env.VUE_APP_API_URL + 'api/messages',\n            headers: {\n                \"Authorization\" : \"Bearer \" + this.$store.state.auth.jwt\n            }\n        };\n        await axios(config).then(response => {\n            this.messages = response.data.reverse();\n        });\n    },\n    methods: {\n        singleMessage: function (id) {\n            return this.$router.push({\n                name: \"SingleMessage\",\n                params: {\n                    id: id\n                }\n            });\n        },\n        showFilter: function (message) {\n            if (message.done && this.filters == \"notDone\") {\n                return false;\n            }\n            return true;\n        },\n        sinceDate: function (dateStr) {\n            let diffMs = new Date() - new Date(dateStr); //différence en millisecondes\n            let diffMin = Math.ceil(diffMs / 60000); //différence en minutes\n\n            if (diffMin < 60) {\n                return diffMin + 'min';\n            } else {\n                let diffH = Math.round(diffMin/60);\n                if (diffH < 24) {\n                    return diffH + 'h';\n                } else {\n                    let diffD = Math.floor(diffH/24);\n                    return diffD + 'j';\n                }\n            }\n        }\n    }\n}   \n</script>\n\n<style lang=\"scss\">\n@import \"@/scss/default.scss\";\n\n.container {\n\n    & section {\n        width: 90%;\n        margin: 0 auto;\n\n        & label {\n\n            & span {\n                margin-right: 30px;\n            }\n        }\n\n        & .messages {\n            display: flex;\n            flex-direction: column;\n            width: 100%;\n            margin-top: 30px;\n\n            & .message {\n                display: flex;\n                align-items: center;\n                width: 80%;\n                margin: 0 auto;\n                justify-content: space-between;\n                padding: 10px 20px;\n                border-bottom: 1px solid black;\n                cursor: pointer;\n\n                &.new {\n                    background-color: rgba(157,216,236, 0.3);\n                }\n\n                & p {\n                    white-space: nowrap;\n                    font-size: 15px;\n                    padding: 0;\n                    margin: 0;\n                    overflow:hidden;\n\n                    &.email {\n                        width: 20%;\n                    }\n\n                    &.object {\n                        width: 22%;\n                    }\n\n                    &.content {\n                        width: 52%;\n                    }\n\n                    &.date {\n                        width: 7%;\n                    }\n                }\n            }\n        }\n    }\n}\n</style>","import { render } from \"./Messages.vue?vue&type=template&id=bd050d6a&bindings={\\\"messages\\\":\\\"data\\\",\\\"filters\\\":\\\"data\\\",\\\"singleMessage\\\":\\\"options\\\",\\\"showFilter\\\":\\\"options\\\",\\\"sinceDate\\\":\\\"options\\\"}\"\nimport script from \"./Messages.vue?vue&type=script&lang=js\"\nexport * from \"./Messages.vue?vue&type=script&lang=js\"\n\nimport \"./Messages.vue?vue&type=style&index=0&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}