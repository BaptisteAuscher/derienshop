{"version":3,"sources":["webpack:///./src/views/Connexion.vue","webpack:///./src/views/Connexion.vue?33c0","webpack:///./src/views/Connexion.vue?d744"],"names":["class","type","user","email","placeholder","password","connect","error","data","methods","isEmailValid","test","this","config","method","url","then","response","console","log","$store","commit","accessToken","$router","push","name","catch","err","msg","render","__scopeId"],"mappings":"6OACUA,MAAM,W,EACR,eAAwB,UAApB,mBAAe,G,SAKZA,MAAM,U,EACb,eAA6I,SAA1I,0IAAsI,G,wEAP7I,eASO,OATP,EASO,CARH,EACA,eAMO,a,eALH,eAA4D,SAArDC,KAAK,O,qDAAgB,EAAAC,KAAKC,MAAK,IAAEC,YAAY,S,mBAAxB,EAAAF,KAAKC,S,eACjC,eAA0E,SAAnEF,KAAK,W,qDAAoB,EAAAC,KAAKG,SAAQ,IAAED,YAAY,gB,mBAA3B,EAAAF,KAAKG,YACrC,eAA0F,UAAlFJ,KAAK,SAAU,QAAK,8CAAU,EAAAK,QAAA,qBAAO,cAAEN,MAAM,iBAAgB,gBAC7C,EAAAO,O,iBAAxB,eAA4C,IAA5C,EAA4C,eAAX,EAAAA,OAAK,I,sBAC1C,S,6CAQO,GACXC,KADW,WAEP,MAAO,CACHN,KAAO,CACHC,MAAO,KACPE,SAAU,MAEdE,MAAO,OAGfE,QAAS,CACLC,aAAgB,SAACP,GAAD,MAAW,uEAAuEQ,KAAKR,IACvGG,QAAS,WAAF,8CAAE,8GACAM,KAAKV,KAAKC,OAAUS,KAAKV,KAAKG,SAD9B,yCAEMO,KAAKL,MAAQ,qCAFnB,UAKAK,KAAKF,aAAaE,KAAKV,KAAKC,OAL5B,yCAMMS,KAAKL,MAAQ,2BANnB,cASDM,EAAS,CACTC,OAAQ,OACRC,IAAK,8CACLP,KAAM,CACFN,KAAMU,KAAKV,OAbd,SAiBC,IAAMW,GAAQG,MAAK,SAAAC,GACrBC,QAAQC,IAAI,CACRjB,KAAMe,EAAST,KAAKN,OAExB,EAAKkB,OAAOC,OAAO,SAAUJ,EAAST,KAAKc,aAC3C,EAAKF,OAAOC,OAAO,UAAWJ,EAAST,KAAKN,MAC5C,EAAKqB,QAAQC,KAAK,CACdC,KAAM,YAEXC,OAAM,SAAAC,GACL,EAAKpB,MAAQoB,EAAIV,SAAST,KAAKoB,OA3B9B,gDAAF,qDAAE,K,UCvBjB,EAAOC,OAAS,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"js/chunk-78391cbb.9f7c9147.js","sourcesContent":["<template>\n    <main class=\"connect\">\n        <h1>Connectez vous.</h1>\n        <form>\n            <input type=\"text\" v-model=\"user.email\" placeholder=\"Email\">\n            <input type=\"password\" v-model=\"user.password\" placeholder=\"Mot de passe\">\n            <button type=\"submit\" @click.prevent=\"connect\" class=\"connectButton\">SE CONNECTER</button>\n            <p class=\"erreur\" v-if=\"error\">{{error}}</p>\n        <p>Connectez-vous avec votre compte administrateur. Si vous ne poss√©dez pas de compte administrateur, ce site n'est pas fait pour vous :)</p>\n        </form>\n    </main>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n    data () {\n        return {\n            user : {\n                email: null,\n                password: null\n            },\n            error: null\n        }\n    },\n    methods: {\n        isEmailValid :  (email) => /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email),\n        connect: async function () {\n            if (!this.user.email || !this.user.password) {\n                return this.error = 'Veuillez remplir tous les champs.'\n            }\n\n            if (!this.isEmailValid(this.user.email)) {\n                return this.error = 'Entrez un email valide.'\n            }\n\n            let config = {\n                method: 'post',\n                url: process.env.VUE_APP_API_URL + 'api/users/login-admin',\n                data: {\n                    user: this.user\n                }\n            };\n\n            await axios(config).then(response => {\n                console.log({\n                    user: response.data.user\n                })\n                this.$store.commit(\"SETJWT\", response.data.accessToken)\n                this.$store.commit(\"SETUSER\", response.data.user)\n                this.$router.push({\n                    name: \"Home\"\n                })\n            }).catch(err => {\n                this.error = err.response.data.msg;\n            });\n        }\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.connect {\n    width: 80%;\n    margin: 0 auto;\n\n    & form {\n        width: 40%;\n        margin: 0 auto;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        margin-top: 40px;\n\n        & input {\n            border: 2px solid black;\n            font-size: 14px;\n            font-weight: 800;\n            padding: 10px 20px;\n            margin-bottom: 10px;\n            outline: none;\n            background-color: white;\n        }\n\n        & button.connectButton {\n            border: none;\n            outline: none;\n            font-weight: 800;\n            font-size: 14px;\n            color: white;\n            background-color: black;\n            padding: 10px 20px;\n            width: initial;\n            cursor: pointer;\n\n        }\n\n        & p.erreur {\n            color: red;\n        }\n    }\n}\n</style>","import { render } from \"./Connexion.vue?vue&type=template&id=5abab404&scoped=true&bindings={\\\"user\\\":\\\"data\\\",\\\"error\\\":\\\"data\\\",\\\"isEmailValid\\\":\\\"options\\\",\\\"connect\\\":\\\"options\\\"}\"\nimport script from \"./Connexion.vue?vue&type=script&lang=js\"\nexport * from \"./Connexion.vue?vue&type=script&lang=js\"\n\nimport \"./Connexion.vue?vue&type=style&index=0&id=5abab404&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5abab404\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Connexion.vue?vue&type=style&index=0&id=5abab404&lang=scss&scoped=true\""],"sourceRoot":""}